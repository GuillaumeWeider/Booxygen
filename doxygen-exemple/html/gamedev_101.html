<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gamedev Framework (gf): Gamedev 101</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gf_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Gamedev Framework (gf)
   &#160;<span id="projectnumber">0.6.0</span>
   </div>
   <div id="projectbrief">A C++11 framework for 2D games</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Gamedev 101 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#gamedev_101_overview">Overview</a><ul><li class="level2"><a href="#gamedev_101_init">Initialization</a></li>
<li class="level2"><a href="#gamedev_101_game_loop">The game loop</a><ul><li class="level3"><a href="#gamedev_101_input">Process input</a></li>
<li class="level3"><a href="#gamedev_101_update">Update</a></li>
<li class="level3"><a href="#gamedev_101_draw">Draw</a></li>
</ul>
</li>
<li class="level2"><a href="#gamedev_101_template">Simple template</a></li>
<li class="level2"><a href="#gamedev_101_entities">Game entities</a></li>
</ul>
</li>
<li class="level1"><a href="#gamedev_101_it_moves">It moves!</a><ul><li class="level2"><a href="#gamedev_101_square_entity">The square entity</a></li>
<li class="level2"><a href="#gamedev_101_square_game_loop">Inside the game loop</a></li>
<li class="level2"><a href="#gamedev_101_it_moves_full">Full example</a></li>
</ul>
</li>
<li class="level1"><a href="#gamedev_101_conclusion">Conclusion</a></li>
<li class="level1"><a href="#gamedev_101_references">References</a></li>
</ul>
</div>
<div class="textblock"><p>The aim of this tutorial is to teach you the basics of game development. More precisely, you will learn the structure of a game, and the main aspects of its development. To follow this tutorial, you must have some knowledge about programming, especially in C++. You don't have to be an expert.</p>
<h1><a class="anchor" id="gamedev_101_overview"></a>
Overview</h1>
<p>A game is split in two main steps. The first step is the initialization of the game.The second step is the main loop.</p>
<h2><a class="anchor" id="gamedev_101_init"></a>
Initialization</h2>
<p>During initialization, your goal is to setup the window and to load the resources.</p>
<p>For the setup of the window, you just have to indicate a title and the initial size of the window. In gf, the window is responsible for handling all the events, inputs from the player and window events (like resizing). To be able to draw something in the window, you have to define a renderer for that window.</p>
<div class="fragment"><div class="line">  <a class="code" href="classgf_1_1_window.html">gf::Window</a> window(<span class="stringliteral">&quot;My great game&quot;</span>, { 1024, 768 });</div><div class="line">  <a class="code" href="classgf_1_1_render_window.html">gf::RenderWindow</a> renderer(window);</div></div><!-- fragment --><p> Then you have to load all the resources that the game need. Or at least, you have to load enough resources for your game to start. But at the beginning (and for quite a long time), you can load everything in the initialization phase.</p>
<p>What resources? Well, basically everything. Images must be loaded and transfered in the GPU memory: they are then called textures. Fonts must be loaded in the main memory, ready to be used for text rendering. Sounds must be loaded in the main memory, ready to be played. And then, all the game-related data must be loaded: levels, maps, characters, quests, etc.</p>
<p>gf helps you for the loading of multimedia resources. <a class="el" href="classgf_1_1_texture.html" title="A texture for colored images. ">gf::Texture</a> and <a class="el" href="classgf_1_1_font.html" title="A character font. ">gf::Font</a> can be loaded directly from a file.</p>
<div class="fragment"><div class="line">  <a class="code" href="classgf_1_1_font.html">gf::Font</a> font;</div><div class="line">  font.<a class="code" href="classgf_1_1_font.html#aa7d23688c81a7c31a5667547e1072501">loadFromFile</a>(<span class="stringliteral">&quot;path/to/Arial.ttf&quot;</span>);</div><div class="line"></div><div class="line">  <a class="code" href="classgf_1_1_texture.html">gf::Texture</a> texture;</div><div class="line">  texture.<a class="code" href="classgf_1_1_texture.html#a4382398a8c7bcde5a4a2fba892a63ca7">loadFromFile</a>(<span class="stringliteral">&quot;path/to/image.png&quot;</span>);</div></div><!-- fragment --><p> If all your multimedia data is in a single directory, you can also use a <a class="el" href="classgf_1_1_resource_manager.html" title="A resource manager. ">gf::ResourceManager</a>. You juste have to indicate the directory and then load textures and fonts with a relative path. The main advantage of a resource manager is that the resources are loaded only once and kept in a cache for the subsequent uses.</p>
<div class="fragment"><div class="line">  <a class="code" href="classgf_1_1_resource_manager.html">gf::ResourceManager</a> resources;</div><div class="line">  resources.<a class="code" href="classgf_1_1_asset_manager.html#ae7c7359062b5a44dcd7c14b83b2de880">addSearchDir</a>(<span class="stringliteral">&quot;path/to/data&quot;</span>);</div><div class="line"></div><div class="line">  <a class="code" href="classgf_1_1_font.html">gf::Font</a>&amp; font = resources.<a class="code" href="classgf_1_1_resource_manager.html#a8598aba56bfe2a6228131871e1e61b0e">getFont</a>(<span class="stringliteral">&quot;Arial.ttf&quot;</span>);</div><div class="line">  <a class="code" href="classgf_1_1_texture.html">gf::Texture</a>&amp; texture = resources.<a class="code" href="classgf_1_1_resource_manager.html#a4b9046e93c19d509872302de924f442a">getTexture</a>(<span class="stringliteral">&quot;image.png&quot;</span>);</div><div class="line"></div><div class="line">  <a class="code" href="classgf_1_1_font.html">gf::Font</a>&amp; anotherFont = resources.<a class="code" href="classgf_1_1_resource_manager.html#a8598aba56bfe2a6228131871e1e61b0e">getFont</a>(<span class="stringliteral">&quot;Arial.ttf&quot;</span>); <span class="comment">// the font is not loaded a second time</span></div></div><!-- fragment --><h2><a class="anchor" id="gamedev_101_game_loop"></a>
The game loop</h2>
<p>The game loop is the most important part of your game. It's where everything will happen. It must be very fast: at least 60 times per seconds. That means you have 16.6&#160;ms to do all you have to do: easy!</p>
<p>A game loop is divided in three steps:</p>
<ol type="1">
<li>Process the input from the player</li>
<li>Update the state of the game</li>
<li>Draw everything</li>
</ol>
<p>The game loop finishes when the player closes the window or quits the game. So, in the <code>main</code> function, after initialization, you have a loop like this.</p>
<div class="fragment"><div class="line"><span class="comment">// game loop</span></div><div class="line"></div><div class="line"><span class="keywordflow">while</span> (window.isOpen()) {</div><div class="line">  <span class="comment">// 1. input</span></div><div class="line"></div><div class="line">  <span class="comment">// 2. update</span></div><div class="line"></div><div class="line">  <span class="comment">// 3. draw</span></div><div class="line"></div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="gamedev_101_input"></a>
Process input</h3>
<p>On each frame, you get the input from the player. This is done with the help of the library you use. For gf, it's the mission of <a class="el" href="classgf_1_1_window.html" title="An OS window. ">gf::Window</a> to give you the input. In fact, you have to deal with the input from the player and the window events (like resizing). For now, we will forget about window events except the event for closing the window.</p>
<p>The events are given in a <a class="el" href="structgf_1_1_event.html" title="Defines a system event and its parameters. ">gf::Event</a> structure. This structure has a <code>type</code> field that indicates the type of event. For example, if <code>type</code> is <a class="el" href="group__window.html#gga244fb10415539f03cde7ed0ae916018dac17e6984c1e5a887a49831beadee6bca" title="A key was pressed (data in event.key) ">gf::EventType::KeyPressed</a>, that means the user pressed a keyboard key and you get the specific data in the <code>key</code> field.</p>
<div class="fragment"><div class="line">    <span class="comment">// 1. input</span></div><div class="line"></div><div class="line">    <a class="code" href="structgf_1_1_event.html">gf::Event</a> event;</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (window.pollEvent(event)) {</div><div class="line">      <span class="keywordflow">switch</span> (event.<a class="code" href="structgf_1_1_event.html#a764707270173af5b617ed6589a58dfe1">type</a>) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__window.html#gga244fb10415539f03cde7ed0ae916018da03f4a47830f97377a35321051685071e">gf::EventType::Closed</a>:</div><div class="line">          window.close();</div><div class="line">          <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">      <span class="keywordflow">case</span> <a class="code" href="group__window.html#gga244fb10415539f03cde7ed0ae916018dac17e6984c1e5a887a49831beadee6bca">gf::EventType::KeyPressed</a>:</div><div class="line"></div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">      <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">    }</div></div><!-- fragment --><p> For each user event, you define the action that must be taken into account for the update of the state.</p>
<h3><a class="anchor" id="gamedev_101_update"></a>
Update</h3>
<p>Before updating the state of the game, you need to know the amount of time that has passed since the last update. This time is needed in many cases, especially for everything that deals with physics (even a simple movement). The idea in the update step is that you must modify the state as if a small amount of time had passed. As a game is a (soft) real-time application, this small amount of time is the real amount of time that has passed.</p>
<p>Before the game loop, you must declare a clock that will be used to measure time.</p>
<div class="fragment"><div class="line">  <a class="code" href="classgf_1_1_clock.html">gf::Clock</a> clock;</div></div><!-- fragment --><p> Then, in the game loop, you can measure the time since the last update.</p>
<div class="fragment"><div class="line">    <span class="comment">// 2. update</span></div><div class="line"></div><div class="line">    <span class="keywordtype">float</span> dt = clock.<a class="code" href="classgf_1_1_clock.html#ad6af1a88379d543468335bece8dd5a1c">restart</a>().<a class="code" href="classgf_1_1_time.html#a7812608f859bf55308cc35d874af5368">asSeconds</a>();</div></div><!-- fragment --><p> You get <code>dt</code> in seconds. If your display is at 60&#160;Hz and is synchronized, then <code>dt</code> will be roughly \( \frac{1}{60} \) seconds. But it can be very different. You cannot assume that it is exactly \( \frac{1}{60} \) seconds.</p>
<p>Then, you have to update your game state. This can be very different from one game to another. It depends on the objects of your game. Here are a few examples:</p>
<ul>
<li>Update the position of an object thanks to its velocity</li>
<li>Update the state of an animation i.e. define the frame to display</li>
<li>Update the behavior of a non-playing character</li>
<li>Update the physics simulation of the world</li>
</ul>
<h3><a class="anchor" id="gamedev_101_draw"></a>
Draw</h3>
<p>The last step in the game loop is to draw everything. Yes, you draw everything on each frame. The bad idea here is to think that you can only draw the items that have changed since the last frame. Desktop graphical interfaces work like that. But not games. In games, it's far easier to draw everything from scratch on each frame. The reason is simple: there may be several thousands of elements to draw and it's easier to draw everything that to track what have changed since the last frame. Moreover, GPUs are designed to work this way.</p>
<p>Before the game loop, you can clear the display with a color that will be used every time you clear the display in the game loop.</p>
<div class="fragment"><div class="line">  renderer.clear(<a class="code" href="structgf_1_1_color.html#aed80fd944d36f831ec5f4c70834df9a4">gf::Color::White</a>);</div></div><!-- fragment --><p> Then, in the game loop, you start the drawing step by clearing the display. Then you draw everything. The order is important, because you do not want the background of the game to be drawn last, you want to draw it first.</p>
<p>In fact, when you draw something, it's not put on the sreen immediately. In most cases, double buffering is used to prevent flicker or tearing. That means that your drawing commands arrive in the back buffer. Then, when you have finished, you call <code>display()</code> that exchanges the front buffer and the back buffer.</p>
<div class="fragment"><div class="line">    <span class="comment">// 3. draw</span></div><div class="line"></div><div class="line">    renderer.clear();</div><div class="line"></div><div class="line">    <span class="comment">// draw everything</span></div><div class="line"></div><div class="line">    renderer.display();</div></div><!-- fragment --><h2><a class="anchor" id="gamedev_101_template"></a>
Simple template</h2>
<p>Here is a simple template you can use as a starter:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;gf/Clock.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;gf/Color.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;gf/Event.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;gf/RenderWindow.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;gf/Window.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main() {</div><div class="line">  <span class="comment">// initialization</span></div><div class="line"></div><div class="line">  <a class="code" href="classgf_1_1_window.html">gf::Window</a> window(<span class="stringliteral">&quot;My great game&quot;</span>, { 1024, 768 });</div><div class="line">  <a class="code" href="classgf_1_1_render_window.html">gf::RenderWindow</a> renderer(window);</div><div class="line"></div><div class="line">  <span class="comment">// game loop</span></div><div class="line"></div><div class="line">  <a class="code" href="classgf_1_1_clock.html">gf::Clock</a> clock;</div><div class="line">  renderer.clear(<a class="code" href="structgf_1_1_color.html#aed80fd944d36f831ec5f4c70834df9a4">gf::Color::White</a>);</div><div class="line"></div><div class="line">  <span class="keywordflow">while</span> (window.isOpen()) {</div><div class="line">    <span class="comment">// 1. input</span></div><div class="line"></div><div class="line">    <a class="code" href="structgf_1_1_event.html">gf::Event</a> event;</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (window.pollEvent(event)) {</div><div class="line">      <span class="keywordflow">switch</span> (event.<a class="code" href="structgf_1_1_event.html#a764707270173af5b617ed6589a58dfe1">type</a>) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__window.html#gga244fb10415539f03cde7ed0ae916018da03f4a47830f97377a35321051685071e">gf::EventType::Closed</a>:</div><div class="line">          window.close();</div><div class="line">          <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">      <span class="keywordflow">case</span> <a class="code" href="group__window.html#gga244fb10415539f03cde7ed0ae916018dac17e6984c1e5a887a49831beadee6bca">gf::EventType::KeyPressed</a>:</div><div class="line"></div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">      <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// 2. update</span></div><div class="line"></div><div class="line">    <span class="keywordtype">float</span> dt = clock.<a class="code" href="classgf_1_1_clock.html#ad6af1a88379d543468335bece8dd5a1c">restart</a>().<a class="code" href="classgf_1_1_time.html#a7812608f859bf55308cc35d874af5368">asSeconds</a>();</div><div class="line"></div><div class="line">    <span class="comment">// 3. draw</span></div><div class="line"></div><div class="line">    renderer.clear();</div><div class="line"></div><div class="line">    <span class="comment">// draw everything</span></div><div class="line"></div><div class="line">    renderer.display();</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="gamedev_101_entities"></a>
Game entities</h2>
<p>An entity (a.k.a. game object) is an element of the game. It can be anything that is involved in the game. As a consequence, an entity needs to be updated and/or rendered every frame. C++ is an object oriented language. So, instead of putting the code directly in the game loop, you can have a base class with an <code>update</code> method and a <code>render</code> method. That is exactly what <a class="el" href="classgf_1_1_entity.html" title="A game entity. ">gf::Entity</a> is.</p>
<p>For your game entites, you can derive from <a class="el" href="classgf_1_1_entity.html" title="A game entity. ">gf::Entity</a>, but it's not mandatory.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyEntity : <span class="keyword">public</span> <a class="code" href="classgf_1_1_entity.html">gf::Entity</a> {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classgf_1_1_entity.html#ac0e67948dc2be7a9fbb6206dc6dcaac7">update</a>(<a class="code" href="classgf_1_1_time.html">gf::Time</a> dt) <span class="keyword">override</span>;</div><div class="line"></div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classgf_1_1_entity.html#a594f75d48d112e3020679b5d33f75d1e">render</a>(<a class="code" href="classgf_1_1_render_target.html">gf::RenderTarget</a>&amp; target, <span class="keyword">const</span> <a class="code" href="structgf_1_1_render_states.html">gf::RenderStates</a>&amp; states) <span class="keyword">override</span>;</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <span class="comment">// data of my entity</span></div><div class="line">};</div></div><!-- fragment --><h1><a class="anchor" id="gamedev_101_it_moves"></a>
It moves!</h1>
<p>In this section, we show a simple example of a square that will move thanks to the keyboard arrows.</p>
<h2><a class="anchor" id="gamedev_101_square_entity"></a>
The square entity</h2>
<p>The only entity here is the square. The square is defined by:</p>
<ul>
<li>a <em>position</em>, that is the center of the square</li>
<li>the <em>velocity</em> the square, this value will be given by the arrows</li>
<li>the <em>size</em> of the square</li>
<li>a <em>color</em></li>
</ul>
<p>The update step of this entity is very simple, we compute the new position thanks to its velocity. As a velocity is a distance divided by a time, we multiply the velocity by <code>dt</code> to obtain the difference between the previous position and the current one.</p>
<p>The draw step consists in drawing a rectangle. We use <a class="el" href="classgf_1_1_rectangle_shape.html" title="Specialized shape representing a rectangle. ">gf::RectangleShape</a> to achieve this goal. We can set the size, the position and the color of the shape. The only difficulty is that the position of the rectangle is fixed at the center of the square. So we call <code>setAnchor</code> to set the anchor to the center of the square. The anchor is the base point of the shape.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>Square {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  Square(<a class="code" href="structgf_1_1_vector.html">gf::Vector2f</a> position, <span class="keywordtype">float</span> size, <a class="code" href="structgf_1_1_vector.html">gf::Color4f</a> color)</div><div class="line">  : m_position(position)</div><div class="line">  , m_velocity(0, 0)</div><div class="line">  , m_size(size)</div><div class="line">  , m_color(color)</div><div class="line">  {</div><div class="line"></div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> setVelocity(<a class="code" href="structgf_1_1_vector.html">gf::Vector2f</a> velocity) {</div><div class="line">    m_velocity = velocity;</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> update(<span class="keywordtype">float</span> dt) {</div><div class="line">    m_position += dt * m_velocity;</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> render(<a class="code" href="classgf_1_1_render_target.html">gf::RenderTarget</a>&amp; target) {</div><div class="line">    <a class="code" href="classgf_1_1_rectangle_shape.html">gf::RectangleShape</a> shape({ m_size, m_size });</div><div class="line">    shape.<a class="code" href="classgf_1_1_transformable.html#a1110891882093c2e8cbfc839e3300dca">setPosition</a>(m_position);</div><div class="line">    shape.setColor(m_color);</div><div class="line">    shape.setAnchor(<a class="code" href="group__graphics.html#ggadeb9cdf9d7e8eec2eb8cc638c54b5066a4f1f6016fc9f3f2353c0cc7c67b292bd">gf::Anchor::Center</a>);</div><div class="line">    target.<a class="code" href="classgf_1_1_render_target.html#a3445880f95c648efbeff3d2572c4c263">draw</a>(shape);</div><div class="line">  }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <a class="code" href="structgf_1_1_vector.html">gf::Vector2f</a> m_position; <span class="comment">// center of the square</span></div><div class="line">  <a class="code" href="structgf_1_1_vector.html">gf::Vector2f</a> m_velocity;</div><div class="line">  <span class="keywordtype">float</span> m_size;</div><div class="line">  <a class="code" href="structgf_1_1_vector.html">gf::Color4f</a> m_color;</div><div class="line">};</div></div><!-- fragment --><p> We declare an entity of type <code>Square</code> at the initialization of the game. We put it at the center of the screen and make it red.</p>
<div class="fragment"><div class="line">  Square entity(ScreenSize / 2, 50.0f, <a class="code" href="structgf_1_1_color.html#a7abeab052065d849d6a3f8b0d9ed57eb">gf::Color::Red</a>);</div></div><!-- fragment --><p> Then, we declare a variable to store the current velocity. The velocity will be changed by the keyboard arrows. We also declare a constant called <code>Speed</code> that represents the maximum speed that can be reached horizontally or vertically. This constant is in pixels per seconds.</p>
<div class="fragment"><div class="line">  <span class="keyword">static</span> constexpr <span class="keywordtype">float</span> Speed = 100.0f;</div><div class="line">  <a class="code" href="structgf_1_1_vector.html">gf::Vector2f</a> velocity(0, 0);</div></div><!-- fragment --><h2><a class="anchor" id="gamedev_101_square_game_loop"></a>
Inside the game loop</h2>
<p>We enter the game loop and process the input events. In our case, pressing an arrow key moves the square. And releasing the key stops the square. Horizontal speed and vertical speed are treated separately. Pressing add a constant speed, releasing substract a constant speed. So, for example, if you press both left and right, the square does not move.</p>
<div class="fragment"><div class="line">      <span class="keywordflow">case</span> <a class="code" href="group__window.html#gga244fb10415539f03cde7ed0ae916018dac17e6984c1e5a887a49831beadee6bca">gf::EventType::KeyPressed</a>:</div><div class="line">        <span class="keywordflow">switch</span> (event.<a class="code" href="structgf_1_1_event.html#ac4bc17972a3e39e63720c2bcc284d7e7">key</a>.<a class="code" href="structgf_1_1_event_1_1_key_event.html#a1bdf031a230d3c618b2728b3a2656106">keycode</a>) {</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__core.html#gga919ab8047a14333e1ed3e12dc536650ba258f49887ef8d14ac268c92b02503aaa">gf::Keycode::Up</a>:</div><div class="line">              velocity.y -= Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__core.html#gga919ab8047a14333e1ed3e12dc536650ba08a38277b0309070706f6652eeae9a53">gf::Keycode::Down</a>:</div><div class="line">              velocity.y += Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__window.html#ggac7037fec22d5d5215cffce98fc7dca64a945d5e233cf7d6240f6b783b36a374ff">gf::Keycode::Left</a>:</div><div class="line">              velocity.x -= Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__window.html#ggac7037fec22d5d5215cffce98fc7dca64a92b09c7c48c520c3c55e497875da437c">gf::Keycode::Right</a>:</div><div class="line">              velocity.x += Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">      <span class="keywordflow">case</span> <a class="code" href="group__window.html#gga244fb10415539f03cde7ed0ae916018da4a77f07c8ad223b71ab4ce78a63841ab">gf::EventType::KeyReleased</a>:</div><div class="line">        <span class="keywordflow">switch</span> (event.<a class="code" href="structgf_1_1_event.html#ac4bc17972a3e39e63720c2bcc284d7e7">key</a>.<a class="code" href="structgf_1_1_event_1_1_key_event.html#a1bdf031a230d3c618b2728b3a2656106">keycode</a>) {</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__core.html#gga919ab8047a14333e1ed3e12dc536650ba258f49887ef8d14ac268c92b02503aaa">gf::Keycode::Up</a>:</div><div class="line">              velocity.y += Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__core.html#gga919ab8047a14333e1ed3e12dc536650ba08a38277b0309070706f6652eeae9a53">gf::Keycode::Down</a>:</div><div class="line">              velocity.y -= Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__window.html#ggac7037fec22d5d5215cffce98fc7dca64a945d5e233cf7d6240f6b783b36a374ff">gf::Keycode::Left</a>:</div><div class="line">              velocity.x += Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__window.html#ggac7037fec22d5d5215cffce98fc7dca64a92b09c7c48c520c3c55e497875da437c">gf::Keycode::Right</a>:</div><div class="line">              velocity.x -= Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div></div><!-- fragment --><p> The rest of the game loop is quite straightforward as everything is done in the <code>Square</code> class. In the update step, we set the velocity that was computed in the previous step. And then, we call <code>update</code>.</p>
<div class="fragment"><div class="line">    entity.setVelocity(velocity);</div><div class="line"></div><div class="line">    <span class="keywordtype">float</span> dt = clock.<a class="code" href="classgf_1_1_clock.html#ad6af1a88379d543468335bece8dd5a1c">restart</a>().<a class="code" href="classgf_1_1_time.html#a7812608f859bf55308cc35d874af5368">asSeconds</a>();</div><div class="line">    entity.update(dt);</div></div><!-- fragment --><p> Finally, we draw the square.</p>
<div class="fragment"><div class="line">    renderer.clear();</div><div class="line">    entity.render(renderer);</div><div class="line">    renderer.display();</div></div><!-- fragment --><p> And that's all!</p>
<h2><a class="anchor" id="gamedev_101_it_moves_full"></a>
Full example</h2>
<p>Here is the full source code for the example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;gf/Clock.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;gf/Color.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;gf/Event.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;gf/RenderWindow.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;gf/Shapes.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;gf/Vector.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;gf/Window.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>Square {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  Square(<a class="code" href="structgf_1_1_vector.html">gf::Vector2f</a> position, <span class="keywordtype">float</span> size, <a class="code" href="structgf_1_1_vector.html">gf::Color4f</a> color)</div><div class="line">  : m_position(position)</div><div class="line">  , m_velocity(0, 0)</div><div class="line">  , m_size(size)</div><div class="line">  , m_color(color)</div><div class="line">  {</div><div class="line"></div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> setVelocity(<a class="code" href="structgf_1_1_vector.html">gf::Vector2f</a> velocity) {</div><div class="line">    m_velocity = velocity;</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> update(<span class="keywordtype">float</span> dt) {</div><div class="line">    m_position += dt * m_velocity;</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> render(<a class="code" href="classgf_1_1_render_target.html">gf::RenderTarget</a>&amp; target) {</div><div class="line">    <a class="code" href="classgf_1_1_rectangle_shape.html">gf::RectangleShape</a> shape({ m_size, m_size });</div><div class="line">    shape.<a class="code" href="classgf_1_1_transformable.html#a1110891882093c2e8cbfc839e3300dca">setPosition</a>(m_position);</div><div class="line">    shape.setColor(m_color);</div><div class="line">    shape.setAnchor(<a class="code" href="group__graphics.html#ggadeb9cdf9d7e8eec2eb8cc638c54b5066a4f1f6016fc9f3f2353c0cc7c67b292bd">gf::Anchor::Center</a>);</div><div class="line">    target.<a class="code" href="classgf_1_1_render_target.html#a3445880f95c648efbeff3d2572c4c263">draw</a>(shape);</div><div class="line">  }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <a class="code" href="structgf_1_1_vector.html">gf::Vector2f</a> m_position; <span class="comment">// center of the square</span></div><div class="line">  <a class="code" href="structgf_1_1_vector.html">gf::Vector2f</a> m_velocity;</div><div class="line">  <span class="keywordtype">float</span> m_size;</div><div class="line">  <a class="code" href="structgf_1_1_vector.html">gf::Color4f</a> m_color;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main() {</div><div class="line">  <span class="comment">// initialization</span></div><div class="line"></div><div class="line">  <span class="keyword">static</span> constexpr <a class="code" href="structgf_1_1_vector.html">gf::Vector2u</a> ScreenSize(500, 500);</div><div class="line">  <a class="code" href="classgf_1_1_window.html">gf::Window</a> window(<span class="stringliteral">&quot;It moves&quot;</span>, ScreenSize);</div><div class="line">  <a class="code" href="classgf_1_1_render_window.html">gf::RenderWindow</a> renderer(window);</div><div class="line"></div><div class="line">  <span class="comment">// entities</span></div><div class="line"></div><div class="line">  Square entity(ScreenSize / 2, 50.0f, <a class="code" href="structgf_1_1_color.html#a7abeab052065d849d6a3f8b0d9ed57eb">gf::Color::Red</a>);</div><div class="line"></div><div class="line">  <span class="comment">// game loop</span></div><div class="line"></div><div class="line">  <a class="code" href="classgf_1_1_clock.html">gf::Clock</a> clock;</div><div class="line">  renderer.clear(<a class="code" href="structgf_1_1_color.html#aed80fd944d36f831ec5f4c70834df9a4">gf::Color::White</a>);</div><div class="line"></div><div class="line">  <span class="keyword">static</span> constexpr <span class="keywordtype">float</span> Speed = 100.0f;</div><div class="line">  <a class="code" href="structgf_1_1_vector.html">gf::Vector2f</a> velocity(0, 0);</div><div class="line"></div><div class="line">  <span class="keywordflow">while</span> (window.isOpen()) {</div><div class="line">    <span class="comment">// 1. input</span></div><div class="line"></div><div class="line">    <a class="code" href="structgf_1_1_event.html">gf::Event</a> event;</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (window.pollEvent(event)) {</div><div class="line">      <span class="keywordflow">switch</span> (event.<a class="code" href="structgf_1_1_event.html#a764707270173af5b617ed6589a58dfe1">type</a>) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__window.html#gga244fb10415539f03cde7ed0ae916018da03f4a47830f97377a35321051685071e">gf::EventType::Closed</a>:</div><div class="line">          window.close();</div><div class="line">          <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">      <span class="keywordflow">case</span> <a class="code" href="group__window.html#gga244fb10415539f03cde7ed0ae916018dac17e6984c1e5a887a49831beadee6bca">gf::EventType::KeyPressed</a>:</div><div class="line">        <span class="keywordflow">switch</span> (event.<a class="code" href="structgf_1_1_event.html#ac4bc17972a3e39e63720c2bcc284d7e7">key</a>.<a class="code" href="structgf_1_1_event_1_1_key_event.html#a1bdf031a230d3c618b2728b3a2656106">keycode</a>) {</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__core.html#gga919ab8047a14333e1ed3e12dc536650ba258f49887ef8d14ac268c92b02503aaa">gf::Keycode::Up</a>:</div><div class="line">              velocity.y -= Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__core.html#gga919ab8047a14333e1ed3e12dc536650ba08a38277b0309070706f6652eeae9a53">gf::Keycode::Down</a>:</div><div class="line">              velocity.y += Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__window.html#ggac7037fec22d5d5215cffce98fc7dca64a945d5e233cf7d6240f6b783b36a374ff">gf::Keycode::Left</a>:</div><div class="line">              velocity.x -= Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__window.html#ggac7037fec22d5d5215cffce98fc7dca64a92b09c7c48c520c3c55e497875da437c">gf::Keycode::Right</a>:</div><div class="line">              velocity.x += Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">      <span class="keywordflow">case</span> <a class="code" href="group__window.html#gga244fb10415539f03cde7ed0ae916018da4a77f07c8ad223b71ab4ce78a63841ab">gf::EventType::KeyReleased</a>:</div><div class="line">        <span class="keywordflow">switch</span> (event.<a class="code" href="structgf_1_1_event.html#ac4bc17972a3e39e63720c2bcc284d7e7">key</a>.<a class="code" href="structgf_1_1_event_1_1_key_event.html#a1bdf031a230d3c618b2728b3a2656106">keycode</a>) {</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__core.html#gga919ab8047a14333e1ed3e12dc536650ba258f49887ef8d14ac268c92b02503aaa">gf::Keycode::Up</a>:</div><div class="line">              velocity.y += Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__core.html#gga919ab8047a14333e1ed3e12dc536650ba08a38277b0309070706f6652eeae9a53">gf::Keycode::Down</a>:</div><div class="line">              velocity.y -= Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__window.html#ggac7037fec22d5d5215cffce98fc7dca64a945d5e233cf7d6240f6b783b36a374ff">gf::Keycode::Left</a>:</div><div class="line">              velocity.x += Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">case</span> <a class="code" href="group__window.html#ggac7037fec22d5d5215cffce98fc7dca64a92b09c7c48c520c3c55e497875da437c">gf::Keycode::Right</a>:</div><div class="line">              velocity.x -= Speed;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">          <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">      <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">      }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// 2. update</span></div><div class="line"></div><div class="line">    entity.setVelocity(velocity);</div><div class="line"></div><div class="line">    <span class="keywordtype">float</span> dt = clock.<a class="code" href="classgf_1_1_clock.html#ad6af1a88379d543468335bece8dd5a1c">restart</a>().<a class="code" href="classgf_1_1_time.html#a7812608f859bf55308cc35d874af5368">asSeconds</a>();</div><div class="line">    entity.update(dt);</div><div class="line"></div><div class="line">    <span class="comment">// 3. draw</span></div><div class="line"></div><div class="line">    renderer.clear();</div><div class="line">    entity.render(renderer);</div><div class="line">    renderer.display();</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p> And here is a screenshot of the result.</p>
<div class="image">
<img src="it_moves.png" alt="it_moves.png"/>
</div>
<h1><a class="anchor" id="gamedev_101_conclusion"></a>
Conclusion</h1>
<p>In this tutorial, we have explained the structure of a game and we have created a simple example of entity that moves. Now, you can imagine that the square is just a character, or a race car, or anything else. You can start a real game.</p>
<h1><a class="anchor" id="gamedev_101_references"></a>
References</h1>
<ul>
<li><a class="el" href="start_game.html">Start a game with gf</a></li>
<li><a href="http://gameprogrammingpatterns.com/contents.html">Game Programming Patterns</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
